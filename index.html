<script>
const numeroWhats = "5511954950044";
let historico = []; // guarda hist√≥rico para voltar

function abrirConsultor(tipo){
  document.getElementById("consultorModal").style.display = "flex";
  
  switch(tipo){
    case 'tintas':
      mostrarTintas();
      break;
    case 'massas':
      mostrarEscolhaMassas();
      break;
    case 'texturas':
      mostrarEscolhaTexturas();
      break;
    case 'preparacao':
      mostrarEscolhaPreparacao();
      break;
  }
}

function fecharConsultor(){
  document.getElementById("consultorModal").style.display = "none";
}

// ================= TINTAS ===================
function mostrarTintas(){
  historico = [];
  document.getElementById("consultorConteudo").innerHTML = `
    <h3>Onde ser√° aplicada a tinta?</h3>
    <button onclick="etapaInterna()">üè† √Årea Interna</button>
    <button onclick="etapaExterna()">üå§ √Årea Externa</button>
    <button onclick="etapaPiso()">üöó Piso / Garagem</button>
    <button onclick="etapaTelhado()">üè† Telhado</button>
  `;
}

// --- Subetapas Tintas ---
function etapaInterna(){
  document.getElementById("consultorConteudo").innerHTML = `
    <h3>√â parede nova ou repintura?</h3>
    <button onclick="produtoFinal('Qualy Color Uso Interno (Parede Nova)','Indicada para √°reas internas, excelente cobertura, baixo odor e √≥timo rendimento.')">Parede Nova</button>
    <button onclick="etapaRepinturaInterna()">Repintura</button>
    <br><br><button onclick="mostrarTintas()">‚¨Ö Voltar</button>
  `;
}

function etapaRepinturaInterna(){
  document.getElementById("consultorConteudo").innerHTML = `
    <h3>Escolha a linha para repintura interna:</h3>
    <button onclick="produtoFinal('Tinta Standard Interna','Boa cobertura e acabamento uniforme.')">Standard</button>
    <button onclick="produtoFinal('Tinta Premium Interna','Acabamento premium e maior durabilidade.')">Premium</button>
    <br><br><button onclick="etapaInterna()">‚¨Ö Voltar</button>
  `;
}

function etapaExterna(){
  document.getElementById("consultorConteudo").innerHTML = `
    <h3>Qual tipo de tinta voc√™ procura?</h3>
    <button onclick="produtoFinal('Tinta Standard Externa','Boa cobertura e custo-benef√≠cio.')">Standard</button>
    <button onclick="produtoFinal('Tinta Premium Externa','Maior resist√™ncia ao sol e chuva.')">Premium</button>
    <button onclick="produtoFinal('Tinta Emborrachada Externa','Prote√ß√£o contra infiltra√ß√£o e microfissuras.')">Emborrachada</button>
    <br><br><button onclick="mostrarTintas()">‚¨Ö Voltar</button>
  `;
}

function etapaPiso(){
  document.getElementById("consultorConteudo").innerHTML = `
    <h3>Para piso ou garagem?</h3>
    <button onclick="produtoFinal('Tinta Piso','Resistente ao tr√°fego, ideal para garagens.')">Tinta Piso</button>
    <button onclick="produtoFinal('Tinta Emborrachada para Piso','Prote√ß√£o contra infiltra√ß√µes e tr√°fego intenso.')">Emborrachada</button>
    <br><br><button onclick="mostrarTintas()">‚¨Ö Voltar</button>
  `;
}

function etapaTelhado(){
  document.getElementById("consultorConteudo").innerHTML = `
    <h3>Para telha?</h3>
    <button onclick="produtoFinal('Tinta Emborrachada para Telhado','Reduz infiltra√ß√µes e aumenta conforto t√©rmico.')">Emborrachada</button>
    <button onclick="produtoFinal('Tinta para Telha','Prote√ß√£o e acabamento dur√°vel para telhas.')">Tinta para Telha</button>
    <br><br><button onclick="mostrarTintas()">‚¨Ö Voltar</button>
  `;
}

// ================= MASSAS ===================
function mostrarEscolhaMassas(){
  historico = [];
  document.getElementById("consultorConteudo").innerHTML = `
    <h3>Qual massa voc√™ precisa?</h3>
    <button onclick="selecionarMassa('Massa PVA','Acabamento liso, √≥tima cobertura para paredes internas.')">Massa PVA</button>
    <button onclick="selecionarMassa('Massa Acr√≠lica','Ideal para acabamento fino, resist√™ncia e durabilidade.')">Massa Acr√≠lica</button>
    <br><br><button onclick="fecharConsultor()">‚¨Ö Voltar</button>
  `;
}

function selecionarMassa(nome, descricao){
  historico.push({func: selecionarMassa, args:[nome, descricao]});
  produtoFinal(nome, descricao);
}

// ================= TEXTURAS ===================
function mostrarEscolhaTexturas(){
  historico = [];
  document.getElementById("consultorConteudo").innerHTML = `
    <h3>Qual textura voc√™ procura?</h3>
    <button onclick="selecionarTextura('Grafiato','Textura r√∫stica e elegante, f√°cil de aplicar.')">Grafiato</button>
    <button onclick="selecionarTextura('Textura Lisa','Acabamento liso e moderno, perfeito para interiores.')">Textura Lisa</button>
    <button onclick="selecionarTextura('Textura Projetada','Aplica√ß√£o r√°pida, acabamento uniforme e resistente.')">Textura Projetada</button>
    <button onclick="selecionarTextura('Granline','Ideal para muros e fachadas com alto rendimento.')">Granline</button>
    <br><br><button onclick="fecharConsultor()">‚¨Ö Voltar</button>
  `;
}

function selecionarTextura(nome, descricao){
  historico.push({func: selecionarTextura, args:[nome, descricao]});
  produtoFinal(nome, descricao);
}

// ================= PREPARA√á√ÉO ===================
function mostrarEscolhaPreparacao(){
  historico = [];
  document.getElementById("consultorConteudo").innerHTML = `
    <h3>Qual produto de prepara√ß√£o voc√™ precisa?</h3>
    <button onclick="selecionarPreparacao('Seladora Acr√≠lica','Uniformiza a absor√ß√£o e prepara a parede para pintura.')">Seladora Acr√≠lica</button>
    <button onclick="selecionarPreparacao('Fundo Preparador','Garante melhor ader√™ncia da tinta e acabamento final.')">Fundo Preparador</button>
    <br><br><button onclick="fecharConsultor()">‚¨Ö Voltar</button>
  `;
}

function selecionarPreparacao(nome, descricao){
  historico.push({func: selecionarPreparacao, args:[nome, descricao]});
  produtoFinal(nome, descricao);
}

// ================= PRODUTO FINAL ===================
function produtoFinal(nome, descricao){
  const mensagem = encodeURIComponent(`Ol√°! Tenho interesse em ${nome}. Pode me enviar mais informa√ß√µes e valores?`);

  document.getElementById("consultorConteudo").innerHTML = `
    <h3>Produto recomendado:</h3>
    <p style="font-weight:bold; font-size:18px;">${nome}</p>
    <p style="color:#555; margin-bottom:20px;">${descricao}</p>
    <a href="https://wa.me/${numeroWhats}?text=${mensagem}" target="_blank">
      <button style="background:#25D366;color:white;padding:14px 20px;font-weight:600;border-radius:10px;">Solicitar Or√ßamento no WhatsApp</button>
    </a>
    <br><br>
    <button onclick="fecharConsultor()" style="padding:10px 15px;">‚¨Ö Voltar</button>
  `;
}
</script>
